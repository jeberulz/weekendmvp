<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- DYNAMIC: Update for each idea -->
    <title>{{IDEA_TITLE}} | Startup Ideas | Weekend MVP</title>
    <meta name="description" content="{{IDEA_DESCRIPTION}}">
    <meta name="author" content="John Iseghohi">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://weekendmvp.app/ideas/{{IDEA_SLUG}}">
    <meta property="og:title" content="{{IDEA_TITLE}} | Startup Ideas">
    <meta property="og:description" content="{{IDEA_DESCRIPTION}}">
    <meta property="og:image" content="https://weekendmvp.app/image/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="{{IDEA_TITLE}} | Startup Ideas">
    <meta property="twitter:description" content="{{IDEA_DESCRIPTION}}">
    <meta property="twitter:image" content="https://weekendmvp.app/image/og-image.png">

    <link rel="canonical" href="https://weekendmvp.app/ideas/{{IDEA_SLUG}}">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../image/favicon.png">
    <link rel="apple-touch-icon" href="../image/webclip.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Geist:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <style>
        body {
            font-family: 'Geist', 'Inter', sans-serif;
            background-color: #fcfaf7;
            color: #1a1a1a;
        }
        .prompt-box {
            background-color: #f5f2ed;
            border: 1px solid #e5e0d8;
        }
        .logo {
            display: inline-block;
            background-color: currentColor;
            -webkit-mask-image: url('/image/weekendmvp-logo.svg');
            mask-image: url('/image/weekendmvp-logo.svg');
            -webkit-mask-repeat: no-repeat;
            mask-repeat: no-repeat;
            -webkit-mask-size: contain;
            mask-size: contain;
        }
        .sidebar-link.active {
            color: #000;
            font-weight: 600;
        }
        #sidebar {
            -ms-overflow-style: none;
            scrollbar-width: none;
            overflow-y: auto;
        }
        #sidebar::-webkit-scrollbar {
            display: none;
        }
    </style>

    <!-- Structured Data for SEO/AEO - DYNAMIC: Update for each idea -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Person",
          "@id": "https://weekendmvp.app/#person",
          "name": "John Iseghohi",
          "jobTitle": "Product Builder & MVP Specialist",
          "url": "https://cal.com/switchtoux"
        },
        {
          "@type": "Article",
          "headline": "{{IDEA_TITLE}}",
          "description": "{{IDEA_DESCRIPTION}}",
          "author": { "@id": "https://weekendmvp.app/#person" },
          "publisher": { "@id": "https://weekendmvp.app/#website" },
          "datePublished": "{{PUBLISH_DATE}}",
          "mainEntityOfPage": "https://weekendmvp.app/ideas/{{IDEA_SLUG}}.html",
          "image": "https://weekendmvp.app/image/og-image.png"
        },
        {
          "@type": "SoftwareApplication",
          "name": "{{IDEA_TITLE}}",
          "applicationCategory": "{{APPLICATION_CATEGORY}}",
          "operatingSystem": "Web",
          "description": "{{SOLUTION_DESCRIPTION}}"
        },
        {
          "@type": "HowTo",
          "name": "Build {{IDEA_TITLE}} MVP",
          "description": "Step-by-step guide to building {{IDEA_TITLE}} in a weekend.",
          "totalTime": "PT{{BUILD_HOURS}}H",
          "step": [
            {
              "@type": "HowToStep",
              "position": 1,
              "name": "Project Setup",
              "text": "{{STEP_1_DESCRIPTION}}"
            },
            {
              "@type": "HowToStep",
              "position": 2,
              "name": "Core Feature",
              "text": "{{STEP_2_DESCRIPTION}}"
            },
            {
              "@type": "HowToStep",
              "position": 3,
              "name": "Landing Page",
              "text": "{{STEP_3_DESCRIPTION}}"
            }
          ]
        },
        {
          "@type": "BreadcrumbList",
          "itemListElement": [
            { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://weekendmvp.app/" },
            { "@type": "ListItem", "position": 2, "name": "Startup Ideas", "item": "https://weekendmvp.app/startup-ideas.html" },
            { "@type": "ListItem", "position": 3, "name": "{{IDEA_TITLE}}", "item": "https://weekendmvp.app/ideas/{{IDEA_SLUG}}.html" }
          ]
        }
      ]
    }
    </script>
</head>
<body class="selection:bg-black/10 selection:text-black">

    <!-- Navigation -->
    <div class="fixed top-0 left-0 right-0 z-40 flex items-center justify-between px-6 py-4 bg-[#fcfaf7]/80 backdrop-blur-md border-b border-neutral-200">
        <div class="flex items-center gap-4">
            <button id="mobile-menu-open" class="lg:hidden text-black p-1 -ml-1" aria-label="Open menu">
                <iconify-icon icon="lucide:menu" width="24" aria-hidden="true"></iconify-icon>
            </button>
            <a href="../index.html">
                <div class="logo h-4 w-32 text-black" role="img" aria-label="Weekend MVP"></div>
            </a>
        </div>
        <div class="flex items-center gap-6">
            <a href="../startup-ideas.html" class="text-sm text-neutral-500 hover:text-black transition-colors hidden sm:block">All Ideas</a>
            <a href="../starter-kit.html" class="text-sm text-neutral-500 hover:text-black transition-colors">Starter Kit</a>
        </div>
    </div>

    <!-- Email Gate Section (hidden by default for SEO - shown via JS for non-subscribers) -->
    <section id="email-gate" class="hidden min-h-screen flex items-center justify-center px-6 pt-24 pb-16">
        <div class="text-center max-w-2xl mx-auto">
            <a href="../startup-ideas.html" class="inline-flex items-center gap-2 text-neutral-500 text-sm mb-8 hover:text-black transition-colors">
                <iconify-icon icon="lucide:arrow-left" width="16"></iconify-icon>
                All Startup Ideas
            </a>

            <h1 class="text-3xl md:text-5xl font-medium text-black tracking-tight leading-[1.1] mb-4">
                {{IDEA_TITLE}}
            </h1>

            <p class="text-lg text-neutral-500 font-light tracking-tight max-w-xl mx-auto leading-relaxed mb-10">
                {{IDEA_SHORT_DESCRIPTION}}
            </p>

            <!-- Email Form -->
            <div class="max-w-md mx-auto">
                <form id="ideas-email-form" class="space-y-4">
                    <div class="flex flex-col gap-3">
                        <input type="text" id="gate-first-name" name="first_name" required placeholder="Your first name"
                            class="bg-white border border-neutral-200 rounded-xl px-4 py-3.5 text-black placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-black/30 transition-all text-sm">
                        <div class="flex flex-col sm:flex-row gap-3">
                            <input type="email" id="gate-email" name="email" required placeholder="Your email address"
                                class="flex-1 bg-white border border-neutral-200 rounded-xl px-4 py-3.5 text-black placeholder:text-neutral-400 focus:outline-none focus:ring-2 focus:ring-black/30 transition-all text-sm">
                            <button type="submit" id="gate-submit-btn" class="group relative inline-flex items-center justify-center gap-2 px-6 py-3.5 bg-black text-white rounded-xl text-sm font-semibold hover:bg-neutral-800 transition-all whitespace-nowrap">
                                <span>Unlock Idea</span>
                                <iconify-icon icon="lucide:arrow-right" width="16"></iconify-icon>
                            </button>
                        </div>
                    </div>
                    <p class="text-xs text-neutral-400">Free access. No spam.</p>
                </form>
            </div>
        </div>
    </section>

    <!-- Mobile Sidebar Backdrop -->
    <div id="mobile-menu-backdrop" class="fixed inset-0 z-50 bg-black/20 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300 lg:hidden"></div>

    <!-- Idea Content Section (Visible by default for SEO - hidden via JS for non-subscribers) -->
    <section id="idea-content">
        <div class="max-w-6xl mx-auto px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 pt-24 pb-16">

                <!-- Sidebar -->
                <aside id="sidebar" class="fixed inset-y-0 left-0 z-[60] w-72 bg-[#fcfaf7] px-8 py-12 transform -translate-x-full transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:w-56 lg:p-0 lg:z-auto lg:h-fit lg:sticky lg:top-24 lg:flex-shrink-0">
                    <div class="flex items-center justify-between mb-8 lg:mb-6">
                        <a href="../startup-ideas.html" class="inline-flex items-center gap-2 text-neutral-500 text-sm hover:text-black transition-colors">
                            <iconify-icon icon="lucide:arrow-left" width="16"></iconify-icon>
                            All Ideas
                        </a>
                        <button id="mobile-menu-close" class="lg:hidden text-neutral-400 hover:text-black transition-colors" aria-label="Close menu">
                            <iconify-icon icon="lucide:x" width="24" aria-hidden="true"></iconify-icon>
                        </button>
                    </div>

                    <nav id="sidebar-nav" class="space-y-1">
                        <p class="text-[10px] font-bold text-neutral-400 uppercase tracking-widest mb-4 ml-3">Overview</p>
                        <a href="#section-problem" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">The Problem</a>
                        <a href="#section-solution" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">The Solution</a>
                        {{#SECTION_MARKET_RESEARCH}}
                        <a href="#section-market" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">Market Research</a>
                        {{/SECTION_MARKET_RESEARCH}}
                        {{#SECTION_COMPETITIVE_LANDSCAPE}}
                        <a href="#section-competitive" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">Competitive Landscape</a>
                        {{/SECTION_COMPETITIVE_LANDSCAPE}}

                        <p class="text-[10px] font-bold text-neutral-400 uppercase tracking-widest mt-8 mb-4 ml-3">Build Details</p>
                        {{#SECTION_BUSINESS_MODEL}}
                        <a href="#section-business" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">Business Model</a>
                        {{/SECTION_BUSINESS_MODEL}}
                        {{#SECTION_TECH_STACK}}
                        <a href="#section-tech" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">Tech Stack</a>
                        {{/SECTION_TECH_STACK}}
                        <a href="#section-prompts" class="sidebar-link block px-3 py-2 text-sm text-neutral-500 hover:text-black transition-colors">AI Build Prompts</a>
                    </nav>
                </aside>

                <!-- Main Content -->
                <main class="flex-1 max-w-2xl">

                    <!-- Header -->
                    <div class="mb-12">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="px-3 py-1 bg-black text-white text-[10px] font-bold uppercase tracking-widest rounded-full">{{CATEGORY}}</span>
                            <span class="text-neutral-400 text-xs">~{{BUILD_TIME}} hours to build</span>
                        </div>
                        <h1 class="text-4xl md:text-5xl font-medium text-black tracking-tight mb-4">{{IDEA_TITLE}}</h1>
                        <p class="text-xl text-neutral-500 font-light">{{IDEA_TAGLINE}}</p>
                    </div>

                    <!-- ===== ALWAYS INCLUDED SECTIONS ===== -->

                    <!-- The Problem -->
                    <div id="section-problem" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">The Problem</h2>
                        <p class="text-neutral-600 leading-relaxed">
                            {{PROBLEM_DESCRIPTION}}
                        </p>
                    </div>

                    <!-- The Solution -->
                    <div id="section-solution" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">The Solution</h2>
                        <p class="text-neutral-600 leading-relaxed mb-8">
                            {{SOLUTION_DESCRIPTION}}
                        </p>

                        <div class="p-8 bg-neutral-100 rounded-3xl">
                            <h4 class="text-sm font-semibold mb-6">How it works:</h4>
                            <div class="flex flex-col md:flex-row gap-4">
                                {{HOW_IT_WORKS_STEPS}}
                            </div>
                        </div>
                    </div>

                    <!-- ===== CONDITIONAL SECTIONS ===== -->

                    <!-- Market Research (included when market data present) -->
                    {{#SECTION_MARKET_RESEARCH}}
                    <div id="section-market" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">Market Research</h2>
                        <p class="text-neutral-600 leading-relaxed mb-6">{{MARKET_OVERVIEW}}</p>
                        <ul class="space-y-3">
                            {{MARKET_VALIDATION_POINTS}}
                        </ul>
                    </div>
                    {{/SECTION_MARKET_RESEARCH}}

                    <!-- Competitive Landscape (included when competitors mentioned) -->
                    {{#SECTION_COMPETITIVE_LANDSCAPE}}
                    <div id="section-competitive" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">Competitive Landscape</h2>
                        <p class="text-neutral-600 leading-relaxed mb-6">{{COMPETITIVE_OVERVIEW}}</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {{COMPETITORS_LIST}}
                        </div>
                        {{#COMPETITIVE_GAPS}}
                        <div class="mt-6 p-4 bg-green-50 border border-green-100 rounded-xl">
                            <h4 class="text-sm font-semibold text-green-800 mb-2">Your Opportunity</h4>
                            <p class="text-sm text-green-700">{{COMPETITIVE_GAPS}}</p>
                        </div>
                        {{/COMPETITIVE_GAPS}}
                    </div>
                    {{/SECTION_COMPETITIVE_LANDSCAPE}}

                    <!-- Business Model (included when revenue details present) -->
                    {{#SECTION_BUSINESS_MODEL}}
                    <div id="section-business" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">Business Model</h2>
                        <p class="text-neutral-600 leading-relaxed mb-6">{{BUSINESS_MODEL_OVERVIEW}}</p>

                        <!-- Pricing Tiers -->
                        {{#PRICING_TIERS}}
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            {{PRICING_TIERS}}
                        </div>
                        {{/PRICING_TIERS}}

                        <!-- Unit Economics -->
                        {{#UNIT_ECONOMICS}}
                        <div class="p-4 bg-neutral-100 rounded-xl">
                            <h4 class="text-sm font-semibold mb-3">Unit Economics</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                {{UNIT_ECONOMICS}}
                            </div>
                        </div>
                        {{/UNIT_ECONOMICS}}
                    </div>
                    {{/SECTION_BUSINESS_MODEL}}

                    <!-- Tech Stack (included when tech mentioned) -->
                    {{#SECTION_TECH_STACK}}
                    <div id="section-tech" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-6">Recommended Tech Stack</h2>
                        <p class="text-neutral-600 leading-relaxed mb-6">{{TECH_STACK_OVERVIEW}}</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {{TECH_STACK_ITEMS}}
                        </div>
                    </div>
                    {{/SECTION_TECH_STACK}}

                    <!-- ===== AI BUILD PROMPTS (ALWAYS INCLUDED) ===== -->

                    <div id="section-prompts" class="mb-12 scroll-mt-24">
                        <h2 class="text-2xl font-medium mb-4">AI Prompts to Build This</h2>
                        <p class="text-neutral-500 text-sm mb-8">Copy and paste these into Claude, Cursor, or your favorite AI tool.</p>

                        <div class="space-y-6">
                            <!-- Prompt 1: Project Setup -->
                            <div class="prompt-box rounded-3xl p-6 relative group">
                                <button onclick="copyPrompt(this)" class="absolute top-4 right-4 text-neutral-400 hover:text-black transition-colors" aria-label="Copy prompt to clipboard">
                                    <iconify-icon icon="lucide:copy" width="18" aria-hidden="true"></iconify-icon>
                                </button>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-3 text-neutral-400">1. Project Setup</h4>
                                <p class="text-xs font-mono text-neutral-600 leading-relaxed italic pr-8">
                                    {{PROMPT_PROJECT_SETUP}}
                                </p>
                            </div>

                            <!-- Prompt 2: Core Feature -->
                            <div class="prompt-box rounded-3xl p-6 relative group">
                                <button onclick="copyPrompt(this)" class="absolute top-4 right-4 text-neutral-400 hover:text-black transition-colors" aria-label="Copy prompt to clipboard">
                                    <iconify-icon icon="lucide:copy" width="18" aria-hidden="true"></iconify-icon>
                                </button>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-3 text-neutral-400">2. Core Feature</h4>
                                <p class="text-xs font-mono text-neutral-600 leading-relaxed italic pr-8">
                                    {{PROMPT_CORE_FEATURE}}
                                </p>
                            </div>

                            <!-- Prompt 3: Landing Page -->
                            <div class="prompt-box rounded-3xl p-6 relative group">
                                <button onclick="copyPrompt(this)" class="absolute top-4 right-4 text-neutral-400 hover:text-black transition-colors" aria-label="Copy prompt to clipboard">
                                    <iconify-icon icon="lucide:copy" width="18" aria-hidden="true"></iconify-icon>
                                </button>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-3 text-neutral-400">3. Landing Page</h4>
                                <p class="text-xs font-mono text-neutral-600 leading-relaxed italic pr-8">
                                    {{PROMPT_LANDING_PAGE}}
                                </p>
                            </div>

                            <!-- Prompt 4: Branding Package -->
                            <div class="prompt-box rounded-3xl p-6 relative group">
                                <button onclick="copyPrompt(this)" class="absolute top-4 right-4 text-neutral-400 hover:text-black transition-colors" aria-label="Copy prompt to clipboard">
                                    <iconify-icon icon="lucide:copy" width="18" aria-hidden="true"></iconify-icon>
                                </button>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-3 text-neutral-400">4. Branding Package</h4>
                                <p class="text-xs font-mono text-neutral-600 leading-relaxed italic pr-8">
                                    {{PROMPT_BRANDING_PACKAGE}}
                                </p>
                            </div>

                            <!-- Prompt 5: Additional (optional) -->
                            {{#PROMPT_ADDITIONAL}}
                            <div class="prompt-box rounded-3xl p-6 relative group">
                                <button onclick="copyPrompt(this)" class="absolute top-4 right-4 text-neutral-400 hover:text-black transition-colors" aria-label="Copy prompt to clipboard">
                                    <iconify-icon icon="lucide:copy" width="18" aria-hidden="true"></iconify-icon>
                                </button>
                                <h4 class="text-[10px] font-bold uppercase tracking-widest mb-3 text-neutral-400">5. {{PROMPT_ADDITIONAL_TITLE}}</h4>
                                <p class="text-xs font-mono text-neutral-600 leading-relaxed italic pr-8">
                                    {{PROMPT_ADDITIONAL}}
                                </p>
                            </div>
                            {{/PROMPT_ADDITIONAL}}
                        </div>
                    </div>

                    <!-- CTA -->
                    <div class="p-12 bg-black rounded-[3rem] text-center">
                        <h2 class="text-2xl font-medium text-white tracking-tight mb-4">Want me to build this for you?</h2>
                        <p class="text-neutral-400 mb-8">Book a consult and let's turn this idea into your MVP.</p>
                        <a href="https://cal.com/switchtoux/mvp-sprint" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-10 py-4 bg-white text-black rounded-full text-sm font-semibold hover:bg-neutral-200 transition-all">
                            <span>Book a Consult</span><span class="sr-only"> (opens in new tab)</span>
                        </a>
                    </div>

                    <!-- Back to all ideas -->
                    <div class="mt-12 text-center">
                        <a href="../startup-ideas.html" class="inline-flex items-center gap-2 text-neutral-500 text-sm hover:text-black transition-colors">
                            <iconify-icon icon="lucide:arrow-left" width="16"></iconify-icon>
                            See all startup ideas
                        </a>
                    </div>

                </main>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-32 pt-12 border-t border-neutral-200">
            <div class="max-w-7xl mx-auto px-6 pb-12 flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="flex flex-col items-center md:items-start gap-2">
                    <a href="../index.html">
                        <div class="logo h-3 w-24 md:h-4 md:w-32 text-black" role="img" aria-label="Weekend MVP"></div>
                    </a>
                    <p class="text-[10px] text-neutral-400 font-mono mt-2">Created by <a href="https://cal.com/switchtoux" target="_blank" rel="noopener noreferrer" class="hover:underline">John Iseghohi<span class="sr-only"> (opens in new tab)</span></a></p>
                </div>
                <div class="flex items-center gap-4">
                    <a href="../privacy-policy.html" class="text-[10px] text-neutral-400 font-mono hover:text-black transition-colors">Privacy Policy</a>
                    <div class="text-[10px] text-neutral-400 font-mono">&copy; <span id="year"></span> WEEKEND MVP</div>
                </div>
            </div>
        </footer>
    </section>

    <script>
        // Set year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Check for existing access (shared with collection page)
        // Content is visible by default (for SEO crawlers)
        // For human users without access, we hide content and show the gate
        const hasAccess = localStorage.getItem('ideas_email');
        const emailGate = document.getElementById('email-gate');
        const ideaContent = document.getElementById('idea-content');

        if (hasAccess) {
            // User has access - ensure content is visible
            initSidebar();
        } else {
            // User hasn't submitted email - show gate, hide content
            emailGate.classList.remove('hidden');
            ideaContent.classList.add('hidden');
        }

        // Handle form submission
        const form = document.getElementById('ideas-email-form');
        const submitBtn = document.getElementById('gate-submit-btn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = document.getElementById('gate-email').value;
            const firstName = document.getElementById('gate-first-name').value;

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<iconify-icon icon="lucide:loader-2" width="16" class="animate-spin"></iconify-icon> <span>Unlocking...</span>';

            try {
                const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

                if (!isLocalhost) {
                    const response = await fetch('/api/ideas-subscribe', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, first_name: firstName })
                    });

                    const data = await response.json();

                    if (!response.ok && !data.success) {
                        throw new Error(data.error || 'Failed to subscribe');
                    }
                }

                localStorage.setItem('ideas_email', email);
                emailGate.classList.add('hidden');
                ideaContent.classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                initSidebar();
            } catch (error) {
                console.error('Subscription error:', error);
                alert('Something went wrong. Please try again.');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>Unlock Idea</span><iconify-icon icon="lucide:arrow-right" width="16"></iconify-icon>';
            }
        });

        // Sidebar initialization function
        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            const backdrop = document.getElementById('mobile-menu-backdrop');
            const openBtn = document.getElementById('mobile-menu-open');
            const closeBtn = document.getElementById('mobile-menu-close');

            if (!sidebar) return;

            // Mobile menu toggle
            const toggleMenu = (show) => {
                if (show) {
                    sidebar.classList.remove('-translate-x-full');
                    backdrop.classList.remove('opacity-0', 'pointer-events-none');
                    document.body.style.overflow = 'hidden';
                } else {
                    sidebar.classList.add('-translate-x-full');
                    backdrop.classList.add('opacity-0', 'pointer-events-none');
                    document.body.style.overflow = '';
                }
            };

            openBtn?.addEventListener('click', () => toggleMenu(true));
            closeBtn?.addEventListener('click', () => toggleMenu(false));
            backdrop?.addEventListener('click', () => toggleMenu(false));

            // Smooth scroll for sidebar links
            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const target = document.querySelector(targetId);

                    if (target) {
                        const offset = window.innerWidth < 1024 ? 80 : 24;
                        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;

                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });

                        // Update active state
                        document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');

                        // Close mobile menu
                        if (window.innerWidth < 1024) {
                            toggleMenu(false);
                        }
                    }
                });
            });

            // Intersection Observer for active sidebar link
            const observerOptions = {
                root: null,
                rootMargin: '-20% 0px -70% 0px',
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('.sidebar-link').forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
                        });
                    }
                });
            }, observerOptions);

            // Observe all sections with IDs that start with 'section-'
            document.querySelectorAll('[id^="section-"]').forEach(section => {
                observer.observe(section);
            });
        }

        // Copy prompt function
        function copyPrompt(button) {
            const promptText = button.nextElementSibling.nextElementSibling.textContent;
            navigator.clipboard.writeText(promptText.trim()).then(() => {
                const icon = button.querySelector('iconify-icon');
                icon.setAttribute('icon', 'lucide:check');
                setTimeout(() => {
                    icon.setAttribute('icon', 'lucide:copy');
                }, 2000);
            });
        }
    </script>
</body>
</html>
